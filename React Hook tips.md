# React Hook을 다룰 때 알고 있으면 좋은 것들

### 렌더링마다 고유한 Props, State, 이벤트 핸들러, 이펙트가 있다.
1. 컴포넌트 안에 있는 모든 함수는 렌더링 될 당시의 상수화된 변수값들을 사용한다.
    - 컴포넌트 내부의 모든 로컬 변수는 상수
    - 컴포넌트 내부의 모든 변수나 함수는 렌더링 단위로 `갇힌다`
2. 이펙트는 콜백함수다. 콜백함수는 자기가 생성될 당시의 state를 `바라본다` 
    - useEffect에 넘겨준 익명함수는 컴포넌트 내부에 있는 state와 props를 렌더링 단위로 기억한다.
    - 왜? `클로저`의 특성 때문

### 클로저
- 의미? 자바스크립트에서 함수가 자신이 생성될 때 당시의 상황(주변 변수)를 기억하는 것. 이때, 값은 상수.
- 스코프 체인? 자신에게 없는 변수를 참조하라고 할 때, 주변 변수까지 찾아보는 것
- 예)
    * 클래스형에서 `this.state.something`로 객체 내에 저장된 변수의 값을 가져온다. (최신 상태 보장)
    * 함수형에서는 `something`으로 이벤트 발생 당시의 값을 가져온다.

### cleanup
- 의미? 필요한 경우, 이펙트를 렌더링마다 실행하면 메모리 누수의 가능성이 있을 때 사용하는 함수
- 목적? 구독과 같은 이펙트를 `되돌리는` 것
- 특징? 컴포넌트가 랜더링 안에 있는 모든 함수는 (이벤트 핸들러, 이펙트, 타임아웃이나 그 안에서 호출되는 API 등) 랜더가 호출될 때 정의된 props와 state 값을 잡아둔다. 이펙트의 클린업은 그래서 최신 props를 읽지 않는다. 클린업이 정의된 시점의 랜더링에 있던 값을 읽는다.

## 참고 자료
- [useEffect 완벽 가이드](https://overreacted.io/a-complete-guide-to-useeffect/)
- [useEffect 완벽 가이드(한글 번역)](https://overreacted.io/ko/a-complete-guide-to-useeffect/)