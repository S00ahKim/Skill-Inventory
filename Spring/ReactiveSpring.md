# Reactive Spring

많은 거대 서비스는 한 페이지 구현시 11개의 MS에 콜함
요청-응답 구조는 미래형 모델이 아니다!?

스프링 5 키워드
- JDK 9
- HTTP/2
- Reactive

Jigsaw라는 새로운 모듈 시스템
하위 의존성 때문에 jar 패킹을 하게 되면 너무 커졌던 문제가 있는데
그런 부분을 해결한 게 직쏘
- 5.0에서는 직쏘를 완벽 지원하기는 어려움. 5.1에서부터 버저닝, 모듈인포 등이 지원 예정
- 모듈 패스 자동 사용 가능하게 지원 예정

http2는 오래된 java.net.HttpURLConnection을 java.net.http 패키지로 대체
NIO, java.util.concurrent 사용
- 구글, 트위터 등에서 사용되고 있었음
- TLS, SSL 보안요소 모든 곳에서
- 커넥션 멀티플렉싱: api 요청시마다 커넥션 새로 만드는 게 아니라 기존 커넥션 안에서 핸들링
- 헤더 압축
- 바이너리 프로토콜
- 요청 우선 순위 설정

스프링부트
서버를 임베드ㅇㅇ
스프링도..

---

리액터

요청을 서버 내 발생하는 퍼블리셔
각각의 워커들을 섭스크라이버라고 생각.
요청을 계속 받을 때 요청을 바로바로 쓰레드풀 만들어서 처리하는데 포커싱하기보다는 가용하는 구조의 펍섭 구조로 생각하는 것
버퍼가, 큐가 존재하는 것.
비동기 형태로 일을 처리하게 되는 것.
동일한 리소스를 갖고 더 많은 요청 처리를 하게 됨. 그런 기법을 쓰게 되는 게 리액티브의 핵심.

전체적으로는 리액티브 시스템이란
응답성, : 적시에 응답. min 타임에 응답. 발생한 문제에 대한 빠르고 효율적 대응. 응답가능한 시스템.
탄력성, : 변화하는 부하에 의해 자원의 변경이 빈번하게 발생한느 상황에서도 응답성을 유지해야 한다. 클라우드 기반 배포 (오토 스케일링) 에서도.
회복성, : 시스템이 어떤 장애에 직면한 상태에서도 응답을 줄 수 있어야 한다. 서킷브레이커(원래는 죽어도 요청을 계속 보내는데, 그러지 말고 기본값을 리턴해라)도 포함. 고가용성을 유지해야만 하는 시스템이 아니더라도!
메시지 드리븐 처리.: 느슨한 결합의 방법을 이벤추얼 컨시스턴시의 성향을 갖는다...? // 느슨한 결합된 컴포넌트 사이에 비동기 방법으로 전달되는 메시지 기반으로 함

비동기, 펍섭

리액티브 시스템 = 복수개의 서비스로 이루어진 분산 시스템이 정상 상황뿐만 아니라 장애 상황에서도 일관된 동작을 보장해주는 시스템
마이크로 서비스가 지향하는 방향

리액티브 스트림즈 스펙
- 인프라간의 상호 운용성에 집중.
- 논블로킹 백프레셔를 제공하는 비동기 스트림 프로세싱 표준
- 단순한 api 구조. 
  - 백프레셔(적정압력을 초과하면 역류하는 것; 얼마나 가져가는지 알고있는거;섭스를 늘려준다거나..) 지원되는 펍섭
  - 자바9의 컨커런트.Flow로 패키징

모노 플럭스

플럭스 플릭스 클라이언트

https://brunch.co.kr/@springboot/117


## Reference
- [스프링캠프 2017 Reactive Spring (Spring5, Reactor)](https://www.youtube.com/watch?v=UIrwrW5A2co)